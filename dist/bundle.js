!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){"use strict";(function(t,r){function o(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"b",function(){return h}),n.d(e,"a",function(){return y});var u,a,c,l=(u="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:r,"function"==typeof(c=u.Symbol)?c.observable?a=c.observable:(a=c("observable"),c.observable=a):a="@@observable",a),f=function(){return Math.random().toString(36).substring(7).split("").join(".")},p={INIT:"@@redux/INIT".concat(f()),REPLACE:"@@redux/REPLACE".concat(f()),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION".concat(f())}};function h(t,e,n){if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw Error("Expected the enhancer to be a function.");return n(h)(t,e)}if("function"!=typeof t)throw Error("Expected the reducer to be a function.");var r=t,o=e,u=[],a=u,c=!1;function f(){a===u&&(a=u.slice())}function y(){if(c)throw Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return o}function d(t){if("function"!=typeof t)throw Error("Expected the listener to be a function.");if(c)throw Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var e=!0;return f(),a.push(t),function(){if(e){if(c)throw Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");e=!1,f();var n=a.indexOf(t);a.splice(n,1)}}}function m(t){if(!function(t){if("object"!=s(t)||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(t))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(c)throw Error("Reducers may not dispatch actions.");try{c=!0,o=r(o,t)}finally{c=!1}for(var e=u=a,n=0;e.length>n;n++)(0,e[n])();return t}return m({type:p.INIT}),i({dispatch:m,subscribe:d,getState:y,replaceReducer:function(t){if("function"!=typeof t)throw Error("Expected the nextReducer to be a function.");r=t,m({type:p.REPLACE})}},l,function(){var t=d;return i({subscribe:function(e){if("object"!=s(e)||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(y())}return n(),{unsubscribe:t(n)}}},l,function(){return this})})}function y(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),r=function(){throw Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},s={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},u=e.map(function(t){return t(s)});return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({},n,{dispatch:r=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}.apply(void 0,o(u))(n.dispatch)})}}}}).call(this,n(2),n(3)(t))},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function i(t){var e="function"==typeof Map?new Map:void 0;return(i=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return s(t,arguments,a(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)})(t)}function s(t,e,n){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&u(o,n.prototype),o}).apply(null,arguments)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,a(e).call(this))).shadow=t.attachShadow({mode:"open"}),t}var n,s,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,i(HTMLElement)),n=e,c=[{key:"observedAttributes",get:function(){return["open"]}}],(s=[{key:"connectedCallback",value:function(){this.render()}},{key:"render",value:function(){this.transitionDuration=this.getAttribute("transition-duration")||"400",this.displayStyle=this.getAttribute("display-style")||"block",this.shadow.innerHTML="\n            <style>\n                .collapsableTabOuter {\n                    overflow: hidden;\n                    transition: height ".concat(this.transitionDuration,'ms;\n                    will-change: height;\n                }\n            </style>\n            <div class="collapsableTabOuter">\n                <div class="collapsableTabInner">\n                    <slot></slot>\n                </div>\n            </div>'),this.outer=this.shadow.querySelector(".collapsableTabOuter"),this.inner=this.shadow.querySelector(".collapsableTabInner")}},{key:"attributeChangedCallback",value:function(t,e,n){"true"===n&&this.executeOpen(),"false"===n&&this.executeClose()}},{key:"executeOpen",value:function(){var t=this;this.inner.style.display=this.displayStyle,setTimeout(function(){t.outer.style.height="".concat(t.inner.scrollHeight,"px")},0)}},{key:"executeClose",value:function(){var t=this;setTimeout(function(){t.outer.style.height=0},0),setTimeout(function(){t.inner.style.display="none"},this.transitionDuration)}},{key:"setContent",value:function(t){this.inner.innerHTML=t}},{key:"open",get:function(){return"true"===this.getAttribute("open")},set:function(t){t?this.executeOpen():this.executeClose()}}])&&r(n.prototype,s),c&&r(n,c),e}();window.customElements.define("collapsable-tab",c)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function i(t){var e="function"==typeof Map?new Map:void 0;return(i=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return s(t,arguments,a(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)})(t)}function s(t,e,n){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&u(o,n.prototype),o}).apply(null,arguments)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,a(e).call(this))}var n,s,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,i(HTMLElement)),n=e,c=[{key:"observedAttributes",get:function(){return["stores-number"]}}],(s=[{key:"attributeChangedCallback",value:function(t,e,n){this.setStoresNumber(n)}},{key:"setStoresNumber",value:function(t){this.storesNumber=t,this.update(t)}},{key:"update",value:function(t){var e=Number(t),n=["No store found, check che search query","1 store found","".concat(e," stores found")];this.innerText=n[Math.min(2,e)]}}])&&r(n.prototype,s),c&&r(n,c),e}();window.customElements.define("results-number",c)},function(t,e,n){"use strict";n.r(e);var r=n(0);function o(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(o){return"function"==typeof o?o(n,r,t):e(o)}}}}var i=o();i.withExtraArgument=o;var s=i,u=function(t){return{type:"UPDATE_SEARCH_TERM",searchTerm:t}},a=function(t){return function(e){e(l()),setTimeout(function(){return e(t)},50)}},c=function(t){return{type:"OPEN_STORE_DETAILS",store:t}},l=function(){return{type:"SHOW_LOADING"}},f=function(t){return{type:"UPDATE_COORDS",coords:t}},p=function(t){return{type:"APPLY_FILTERS",filters:t}},h=function(t){return{type:"SET_MAP_INITIAL_COORDS",coords:t}},y={"store-types":{action:function(t){return{type:"SET_STORE_TYPES",storeTypes:t}},filterKey:"storeTypes",formatValue:function(t){return t[0].split(",")}},search:{action:u,filterKey:"search",formatValue:function(t){return t[0]}},coords:{action:f,filterKey:"coords",formatValue:function(t){var e=t[0].split(","),n=t[2].split(","),r=t[4].split(",");return{center:{lat:Number(e[0]),lng:Number(e[1])},ne:{lat:Number(n[0]),lng:Number(n[1])},sw:{lat:Number(r[0]),lng:Number(r[1])}}}}},d=Object.keys(y);function m(t){var e="#";if(e+=t.search?"/search/".concat(t.search):"",t.coords){var n=t.coords;e+="/coords/".concat(n.center.lat,",").concat(n.center.lng,"/ne/").concat(n.ne.lat,",").concat(n.ne.lng,"/sw/").concat(n.sw.lat,",").concat(n.sw.lng)}e+=t.storeTypes&&t.storeTypes.length?"/store-types/".concat(t.storeTypes.join(",")):"";var r="".concat(window.location.pathname).concat(e);window.history.pushState({},"",r)}function g(){var t=window.location.hash.slice(1).split("/"),e={search:null,storeTypes:[],coords:null};d.forEach(function(n){if(t.includes(n)){var r=t.slice(t.indexOf(n)+1),o=d.map(function(t){return r.indexOf(t)}).filter(function(t){return t>-1}).sort()[0]||r.length,i=r.slice(0,o);i.length&&(e[y[n].filterKey]=y[n].formatValue(i))}}),E(p(e)),E(h(e.coords))}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){v(t,e,n[e])})}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(t){return function(e){var n=!t.search||function(t,e){return t.location.some(function(t){return t.toLowerCase().includes(e.toLowerCase())})}(e,t.search),r=!t.storeTypes.length||function(t,e){return t.storeTypes.some(function(t){return e.includes(t.id)})}(e,t.storeTypes),o=!t.coords||function(t,e,n){return e.lat>=Number(t.lat)&&Number(t.lat)>=n.lat&&e.lng>=Number(t.lng)&&Number(t.lng)>=n.lng}(e,t.coords.ne,t.coords.sw);return e.visible=n&&r&&o,e}}var w=function(t,e){switch(console.log(e.type),e.type){case"LOAD_STORES":return b({},t,{stores:e.stores.map(_(t.filters))});case"LOAD_STORE_TYPES":return b({},t,{storeTypes:e.storeTypes});case"LOAD_LOCATIONS":return b({},t,{locations:e.locations});case"UPDATE_SEARCH_TERM":var n=b({},t.filters,{search:e.searchTerm,coords:null});return m(n),b({},t,{searchTerm:e.searchTerm,stores:t.stores.map(_(n)),filters:n});case"RESET_SEARCH_TERM":var r=b({},t.filters,{search:null});return m(r),b({},t,{searchTerm:"",stores:t.stores.map(_(r)),filters:r});case"TOGGLE_FILTER_PANEL":return b({},t,{ui:b({},t.ui,{filterPanelOpen:!t.ui.filterPanelOpen})});case"SET_STORE_TYPES":var o=b({},t.filters,{storeTypes:e.storeTypes});return m(o),b({},t,{stores:t.stores.map(_(o)),filters:o});case"TOGGLE_STORE_TYPE":var i=b({},t.filters,{storeTypes:(a=t.filters.storeTypes,c=e.storeTypeId,a.includes(c)?a.filter(function(t){return t!==c}):a.concat(c))});return m(i),b({},t,{stores:t.stores.map(_(i)),filters:i});case"RESET_FILTERS":var s=b({},t.filters,{storeTypes:[]});return m(s),b({},t,{stores:t.stores.map(_(s)),filters:s});case"OPEN_STORE_DETAILS":return b({},t,{openedStore:e.store});case"UPDATE_COORDS":var u=b({},t.filters,{search:null,coords:e.coords});return m(u),b({},t,{searchTerm:"",stores:t.stores.map(_(u)),filters:u});case"TOGGLE_SEARCH_LAYER":return b({},t,{ui:b({},t.ui,{searchLayerOpen:!t.ui.searchLayerOpen})});case"SET_USER_LOCATION":return b({},t,{userLocation:e.center});case"SHOW_LOADING":return b({},t,{ui:b({},t.ui,{showLoading:!0})});case"HIDE_LOADING":return b({},t,{ui:b({},t.ui,{showLoading:!1})});case"APPLY_FILTERS":return b({},t,{searchTerm:e.filters.search||"",stores:t.stores.map(_(e.filters)),filters:e.filters});case"SET_MAP_INITIAL_COORDS":return b({},t,{mapInitialCoords:e.coords});default:return t}var a,c},S={stores:[],numberOfVisibleStores:null,storeTypes:[],locations:[],ui:{filterPanelOpen:!1,resultPanelOpen:!0,searchLayerOpen:!1,showLoading:!1},searchTerm:"",userLocation:null,mapInitialCoords:null,openedStore:null,filters:{search:null,coords:null,storeTypes:[]}},O=Object(r.b)(w,S,Object(r.a)(s));function T(t,e){return e.split(".").reduce(function(t,e){return t&&t.hasOwnProperty(e)?t[e]:void 0},t)}var k=function(t,e){var n;function r(){var r=O.getState();n&&!t.some(function(t){return T(r,t)!==T(n,t)})||(e(r,n),n=r)}t=[].concat(t);var o=O.subscribe(r);return r(),o},E=function(t){return O.dispatch(t)};function x(t){return"0"!==t}function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function L(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function P(t){var e="function"==typeof Map?new Map:void 0;return(P=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return j(t,arguments,R(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),I(r,t)})(t)}function j(t,e,n){return(j=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&I(o,n.prototype),o}).apply(null,arguments)}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var A=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=L(this,R(e).call(this))).input=t.querySelector("#searchInput"),t.resetBtn=t.querySelector(".clearSearch"),t.geolocateBtn=t.querySelector(".geolocalizeBtn"),t}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(e,P(HTMLElement)),n=e,o=[{key:"observedAttributes",get:function(){return["search-term"]}}],(r=[{key:"connectedCallback",value:function(){this.input.addEventListener("input",this.handleInput.bind(this)),this.resetBtn.addEventListener("click",this.handleReset.bind(this)),this.geolocateBtn.addEventListener("click",this.handleGeoLocation.bind(this))}},{key:"setSearchTerm",value:function(t){this.searchTerm=t,this.update(t)}},{key:"attributeChangedCallback",value:function(t,e,n){this.setSearchTerm(n)}},{key:"update",value:function(t){this.input.value=t}},{key:"handleInput",value:function(t){E(u(t.target.value))}},{key:"handleReset",value:function(){E(a({type:"RESET_SEARCH_TERM"}))}},{key:"handleGeoLocation",value:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var e={lat:t.coords.latitude,lng:t.coords.longitude};E(u("")),E({type:"SET_USER_LOCATION",userLocation:e})},function(t){console.log("Geolocation error:",t)}):console.log("Geolocation error: missing support")}}])&&M(n.prototype,r),o&&M(n,o),e}();window.customElements.define("search-box",A);n(1);function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function z(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t){var e="function"==typeof Map?new Map:void 0;return(B=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return F(t,arguments,q(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),H(r,t)})(t)}function F(t,e,n){return(F=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&H(o,n.prototype),o}).apply(null,arguments)}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Z=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=z(this,q(e).call(this))).oldSuggestions=[],t.suggestionList=t.querySelector("ul"),t.tab=t.querySelector("collapsable-tab"),t}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(e,B(HTMLElement)),n=e,(r=[{key:"connectedCallback",value:function(){var t=this;k("searchTerm",function(e){t.update(e)})}},{key:"update",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{searchTerm:"",locations:[]},n=e.searchTerm,r=e.locations,o=n.length>2?r.filter(function(t){return t.name.toLowerCase().includes(n.toLowerCase())}):[],i=Boolean(o.length),s=i?o:this.oldSuggestions;this.oldSuggestions=o,this.tab.open=i,this.suggestionList.innerHTML="",s.forEach(function(e){var n=document.createElement("li");n.onclick=t.handleSuggestionClick.bind(t,e.name),n.innerText=e.name,t.suggestionList.appendChild(n)})}},{key:"handleSuggestionClick",value:function(t){E(u(t)),this.tab.open=!1}}])&&D(n.prototype,r),o&&D(n,o),e}();window.customElements.define("search-suggestions",Z);n(4);function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function V(t,e){return!e||"object"!==G(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function W(t){var e="function"==typeof Map?new Map:void 0;return(W=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Y(t,arguments,X(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),K(r,t)})(t)}function Y(t,e,n){return(Y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&K(o,n.prototype),o}).apply(null,arguments)}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var J=document.querySelector("#storeListElement"),$=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),V(this,X(e).call(this))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(e,W(HTMLElement)),n=e,o=[{key:"observedAttributes",get:function(){return["store"]}}],(r=[{key:"connectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(t,e,n){this.setStore(JSON.parse(n))}},{key:"setStore",value:function(t){this.store=t,this.update(t)}},{key:"update",value:function(t){this.innerHTML=J.innerHTML,this.storeId=t.id,this.querySelector(".storeName").innerText=t.name,this.querySelector(".storePhone .text").innerText=t.phone,this.addEventListener("click",this.handleStoreClick.bind(this,t))}},{key:"handleStoreClick",value:function(t){E(c(t))}}])&&U(n.prototype,r),o&&U(n,o),e}();function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function et(t,e){return!e||"object"!==Q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nt(t){var e="function"==typeof Map?new Map:void 0;return(nt=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return rt(t,arguments,it(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ot(r,t)})(t)}function rt(t,e,n){return(rt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&ot(o,n.prototype),o}).apply(null,arguments)}function ot(t,e){return(ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}window.customElements.define("stores-list-element",$);var st=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),et(this,it(e).call(this))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ot(t,e)}(e,nt(HTMLElement)),n=e,o=[{key:"observedAttributes",get:function(){return["stores"]}}],(r=[{key:"connectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(t,e,n){this.setStores(JSON.parse(n))}},{key:"setStores",value:function(t){this.stores=t,this.handleStoreUpdate(t)}},{key:"handleStoreUpdate",value:function(t){this.querySelectorAll("stores-list-element").length?this.update(t):this.render(t)}},{key:"render",value:function(t){var e=document.createElement("ul");t.forEach(function(t){var n=document.createElement("stores-list-element");n.setStore(t),n.hidden=!t.visible,e.appendChild(n)}),this.innerHTML="",this.appendChild(e)}},{key:"update",value:function(t){this.querySelectorAll("stores-list-element").forEach(function(e){e.hidden=!t.find(function(t){return t.id===e.storeId}).visible})}}])&&tt(n.prototype,r),o&&tt(n,o),e}();function ut(t,e){t.getMarkerClusterer().extend(ut,google.maps.OverlayView),this.cluster_=t,this.className_=t.getMarkerClusterer().getClusterClass(),this.styles_=e,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(t.getMap())}function at(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinimumClusterSize(),this.averageCenter_=t.getAverageCenter(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new ut(this,t.getStyles())}function ct(t,e,n){this.extend(ct,google.maps.OverlayView),e=e||[],n=n||{},this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.gridSize_=n.gridSize||60,this.minClusterSize_=n.minimumClusterSize||2,this.maxZoom_=n.maxZoom||null,this.styles_=n.styles||[],this.title_=n.title||"",this.zoomOnClick_=!0,void 0!==n.zoomOnClick&&(this.zoomOnClick_=n.zoomOnClick),this.averageCenter_=!1,void 0!==n.averageCenter&&(this.averageCenter_=n.averageCenter),this.ignoreHidden_=!1,void 0!==n.ignoreHidden&&(this.ignoreHidden_=n.ignoreHidden),this.enableRetinaIcons_=!1,void 0!==n.enableRetinaIcons&&(this.enableRetinaIcons_=n.enableRetinaIcons),this.imagePath_=n.imagePath||ct.IMAGE_PATH,this.imageExtension_=n.imageExtension||ct.IMAGE_EXTENSION,this.imageSizes_=n.imageSizes||ct.IMAGE_SIZES,this.calculator_=n.calculator||ct.CALCULATOR,this.batchSize_=n.batchSize||ct.BATCH_SIZE,this.batchSizeIE_=n.batchSizeIE||ct.BATCH_SIZE_IE,this.clusterClass_=n.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(e,!0),this.setMap(t)}window.customElements.define("stores-list",st),ut.prototype.onAdd=function(){var t,e,n=this,r=google.maps.version.split(".");r=parseInt(100*r[0],10)+parseInt(r[1],10),this.div_=document.createElement("div"),this.div_.className=this.className_,this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),this.boundsChangedListener_=google.maps.event.addListener(this.getMap(),"bounds_changed",function(){e=t}),google.maps.event.addDomListener(this.div_,"mousedown",function(){t=!0,e=!1}),r>=332&&google.maps.event.addDomListener(this.div_,"touchstart",function(t){t.stopPropagation()}),google.maps.event.addDomListener(this.div_,"click",function(r){if(t=!1,!e){var o,i,s=n.cluster_.getMarkerClusterer();google.maps.event.trigger(s,"click",n.cluster_),google.maps.event.trigger(s,"clusterclick",n.cluster_),s.getZoomOnClick()&&(i=s.getMaxZoom(),o=n.cluster_.getBounds(),s.getMap().fitBounds(o),setTimeout(function(){s.getMap().fitBounds(o),null!==i&&s.getMap().getZoom()>i&&s.getMap().setZoom(i+1)},100)),r.cancelBubble=!0,r.stopPropagation&&r.stopPropagation()}}),google.maps.event.addDomListener(this.div_,"mouseover",function(){var t=n.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseover",n.cluster_)}),google.maps.event.addDomListener(this.div_,"mouseout",function(){var t=n.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseout",n.cluster_)})},ut.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.removeListener(this.boundsChangedListener_),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ut.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px",this.div_.style.zIndex=google.maps.Marker.MAX_ZINDEX+1}},ut.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ut.prototype.show=function(){if(this.div_){var t="",e=this.backgroundPosition_.split(" "),n=parseInt(e[0].replace(/^\s+|\s+$/g,""),10),r=parseInt(e[1].replace(/^\s+|\s+$/g,""),10),o=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(o),t="<img src='"+this.url_+"' style='position: absolute; top: "+r+"px; left: "+n+"px; ",this.cluster_.getMarkerClusterer().enableRetinaIcons_?t+="width: "+this.width_+"px; height: "+this.height_+"px;":t+="clip: rect("+-1*r+"px, "+(-1*n+this.width_)+"px, "+(-1*r+this.height_)+"px, "+-1*n+"px);",t+="'>",this.div_.innerHTML=t+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>",void 0===this.sums_.title||""===this.sums_.title?this.div_.title=this.cluster_.getMarkerClusterer().getTitle():this.div_.title=this.sums_.title,this.div_.style.display=""}this.visible_=!0},ut.prototype.useStyle=function(t){this.sums_=t;var e=Math.max(0,t.index-1);e=Math.min(this.styles_.length-1,e);var n=this.styles_[e];this.url_=n.url,this.height_=n.height,this.width_=n.width,this.anchorText_=n.anchorText||[0,0],this.anchorIcon_=n.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=n.textColor||"black",this.textSize_=n.textSize||11,this.textDecoration_=n.textDecoration||"none",this.fontWeight_=n.fontWeight||"bold",this.fontStyle_=n.fontStyle||"normal",this.fontFamily_=n.fontFamily||"Arial,sans-serif",this.backgroundPosition_=n.backgroundPosition||"0 0"},ut.prototype.setCenter=function(t){this.center_=t},ut.prototype.createCss=function(t){var e=[];return e.push("cursor: pointer;"),e.push("position: absolute; top: "+t.y+"px; left: "+t.x+"px;"),e.push("width: "+this.width_+"px; height: "+this.height_+"px;"),e.push("-webkit-user-select: none;"),e.push("-khtml-user-select: none;"),e.push("-moz-user-select: none;"),e.push("-o-user-select: none;"),e.push("user-select: none;"),e.join("")},ut.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=this.anchorIcon_[1],e.y-=this.anchorIcon_[0],e.x=parseInt(e.x,10),e.y=parseInt(e.y,10),e},at.prototype.getSize=function(){return this.markers_.length},at.prototype.getMarkers=function(){return this.markers_},at.prototype.getCenter=function(){return this.center_},at.prototype.getMap=function(){return this.map_},at.prototype.getMarkerClusterer=function(){return this.markerClusterer_},at.prototype.getBounds=function(){var t,e=new google.maps.LatLngBounds(this.center_,this.center_),n=this.getMarkers();for(t=0;t<n.length;t++)e.extend(n[t].getPosition());return e},at.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},at.prototype.addMarker=function(t){var e,n,r;if(this.isMarkerAlreadyAdded_(t))return!1;if(this.center_){if(this.averageCenter_){var o=this.markers_.length+1,i=(this.center_.lat()*(o-1)+t.getPosition().lat())/o,s=(this.center_.lng()*(o-1)+t.getPosition().lng())/o;this.center_=new google.maps.LatLng(i,s),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();if(t.isAdded=!0,this.markers_.push(t),n=this.markers_.length,null!==(r=this.markerClusterer_.getMaxZoom())&&this.map_.getZoom()>r)t.getMap()!==this.map_&&t.setMap(this.map_);else if(n<this.minClusterSize_)t.getMap()!==this.map_&&t.setMap(this.map_);else if(n===this.minClusterSize_)for(e=0;e<n;e++)this.markers_[e].setMap(null);else t.setMap(null);return this.updateIcon_(),!0},at.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},at.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},at.prototype.updateIcon_=function(){var t=this.markers_.length,e=this.markerClusterer_.getMaxZoom();if(null!==e&&this.map_.getZoom()>e)this.clusterIcon_.hide();else if(t<this.minClusterSize_)this.clusterIcon_.hide();else{var n=this.markerClusterer_.getStyles().length,r=this.markerClusterer_.getCalculator()(this.markers_,n);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(r),this.clusterIcon_.show()}},at.prototype.isMarkerAlreadyAdded_=function(t){var e;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(t);for(e=0;e<this.markers_.length;e++)if(t===this.markers_[e])return!0;return!1},ct.prototype.onAdd=function(){var t=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.prevZoom_=this.getMap().getZoom(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){var t=this.getMap().getZoom(),e=this.getMap().minZoom||0,n=Math.min(this.getMap().maxZoom||100,this.getMap().mapTypes[this.getMap().getMapTypeId()].maxZoom);t=Math.min(Math.max(t,e),n),this.prevZoom_!=t&&(this.prevZoom_=t,this.resetViewport_(!1))}.bind(this)),google.maps.event.addListener(this.getMap(),"idle",function(){t.redraw_()})]},ct.prototype.onRemove=function(){var t;for(t=0;t<this.markers_.length;t++)this.markers_[t].getMap()!==this.activeMap_&&this.markers_[t].setMap(this.activeMap_);for(t=0;t<this.clusters_.length;t++)this.clusters_[t].remove();for(this.clusters_=[],t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},ct.prototype.draw=function(){},ct.prototype.setupStyles_=function(){var t,e;if(!(this.styles_.length>0))for(t=0;t<this.imageSizes_.length;t++)e=this.imageSizes_[t],this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},ct.prototype.fitMapToMarkers=function(){var t,e=this.getMarkers(),n=new google.maps.LatLngBounds;for(t=0;t<e.length;t++)!e[t].getVisible()&&this.getIgnoreHidden()||n.extend(e[t].getPosition());this.getMap().fitBounds(n)},ct.prototype.getGridSize=function(){return this.gridSize_},ct.prototype.setGridSize=function(t){this.gridSize_=t},ct.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},ct.prototype.setMinimumClusterSize=function(t){this.minClusterSize_=t},ct.prototype.getMaxZoom=function(){return this.maxZoom_},ct.prototype.setMaxZoom=function(t){this.maxZoom_=t},ct.prototype.getStyles=function(){return this.styles_},ct.prototype.setStyles=function(t){this.styles_=t},ct.prototype.getTitle=function(){return this.title_},ct.prototype.setTitle=function(t){this.title_=t},ct.prototype.getZoomOnClick=function(){return this.zoomOnClick_},ct.prototype.setZoomOnClick=function(t){this.zoomOnClick_=t},ct.prototype.getAverageCenter=function(){return this.averageCenter_},ct.prototype.setAverageCenter=function(t){this.averageCenter_=t},ct.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},ct.prototype.setIgnoreHidden=function(t){this.ignoreHidden_=t},ct.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons_},ct.prototype.setEnableRetinaIcons=function(t){this.enableRetinaIcons_=t},ct.prototype.getImageExtension=function(){return this.imageExtension_},ct.prototype.setImageExtension=function(t){this.imageExtension_=t},ct.prototype.getImagePath=function(){return this.imagePath_},ct.prototype.setImagePath=function(t){this.imagePath_=t},ct.prototype.getImageSizes=function(){return this.imageSizes_},ct.prototype.setImageSizes=function(t){this.imageSizes_=t},ct.prototype.getCalculator=function(){return this.calculator_},ct.prototype.setCalculator=function(t){this.calculator_=t},ct.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},ct.prototype.setBatchSizeIE=function(t){this.batchSizeIE_=t},ct.prototype.getClusterClass=function(){return this.clusterClass_},ct.prototype.setClusterClass=function(t){this.clusterClass_=t},ct.prototype.getMarkers=function(){return this.markers_},ct.prototype.getTotalMarkers=function(){return this.markers_.length},ct.prototype.getClusters=function(){return this.clusters_},ct.prototype.getTotalClusters=function(){return this.clusters_.length},ct.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw_()},ct.prototype.addMarkers=function(t,e){var n;for(n in t)t.hasOwnProperty(n)&&this.pushMarkerTo_(t[n]);e||this.redraw_()},ct.prototype.pushMarkerTo_=function(t){if(t.getDraggable()){var e=this;google.maps.event.addListener(t,"dragend",function(){e.ready_&&(this.isAdded=!1,e.repaint())})}t.isAdded=!1,this.markers_.push(t)},ct.prototype.removeMarker=function(t,e){var n=this.removeMarker_(t);return!e&&n&&this.repaint(),n},ct.prototype.removeMarkers=function(t,e){var n,r,o=!1;for(n=0;n<t.length;n++)r=this.removeMarker_(t[n]),o=o||r;return!e&&o&&this.repaint(),o},ct.prototype.removeMarker_=function(t){var e,n=-1;if(this.markers_.indexOf)n=this.markers_.indexOf(t);else for(e=0;e<this.markers_.length;e++)if(t===this.markers_[e]){n=e;break}return-1!==n&&(t.setMap(null),this.markers_.splice(n,1),!0)},ct.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},ct.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout(function(){var e;for(e=0;e<t.length;e++)t[e].remove()},0)},ct.prototype.getExtendedBounds=function(t){var e=this.getProjection(),n=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),r=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),o=e.fromLatLngToDivPixel(n);o.x+=this.gridSize_,o.y-=this.gridSize_;var i=e.fromLatLngToDivPixel(r);i.x-=this.gridSize_,i.y+=this.gridSize_;var s=e.fromDivPixelToLatLng(o),u=e.fromDivPixelToLatLng(i);return t.extend(s),t.extend(u),t},ct.prototype.redraw_=function(){this.createClusters_(0)},ct.prototype.resetViewport_=function(t){var e,n;for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();for(this.clusters_=[],e=0;e<this.markers_.length;e++)(n=this.markers_[e]).isAdded=!1,t&&n.setMap(null)},ct.prototype.distanceBetweenPoints_=function(t,e){var n=(e.lat()-t.lat())*Math.PI/180,r=(e.lng()-t.lng())*Math.PI/180,o=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},ct.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},ct.prototype.addToClosestCluster_=function(t){var e,n,r,o,i=4e4,s=null;for(e=0;e<this.clusters_.length;e++)(o=(r=this.clusters_[e]).getCenter())&&(n=this.distanceBetweenPoints_(o,t.getPosition()))<i&&(i=n,s=r);s&&s.isMarkerInClusterBounds(t)?s.addMarker(t):((r=new at(this)).addMarker(t),this.clusters_.push(r))},ct.prototype.createClusters_=function(t){var e,n,r,o=this;if(this.ready_){0===t&&(google.maps.event.trigger(this,"clusteringbegin",this),void 0!==this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),r=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var i=this.getExtendedBounds(r),s=Math.min(t+this.batchSize_,this.markers_.length);for(e=t;e<s;e++)!(n=this.markers_[e]).isAdded&&this.isMarkerInBounds_(n,i)&&(!this.ignoreHidden_||this.ignoreHidden_&&n.getVisible())&&this.addToClosestCluster_(n);s<this.markers_.length?this.timerRefStatic=setTimeout(function(){o.createClusters_(s)},0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}},ct.prototype.extend=function(t,e){return function(t){var e;for(e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},ct.CALCULATOR=function(t,e){for(var n=0,r=t.length.toString(),o=r;0!==o;)o=parseInt(o/10,10),n++;return{text:r,index:n=Math.min(n,e),title:""}},ct.BATCH_SIZE=2e3,ct.BATCH_SIZE_IE=500,ct.IMAGE_PATH="../images/m",ct.IMAGE_EXTENSION="png",ct.IMAGE_SIZES=[53,56,66,78,90];var lt=ct;function ft(t,e,n){var r,o,i,s=null,u=0;n||(n={});var a=function(){u=!1===n.leading?0:Date.now(),s=null,i=t.apply(r,o),s||(r=o=null)};return function(){var c=Date.now();u||!1!==n.leading||(u=c);var l=e-(c-u);return r=this,o=arguments,l<=0||l>e?(s&&(clearTimeout(s),s=null),u=c,i=t.apply(r,o),s||(r=o=null)):s||!1===n.trailing||(s=setTimeout(a,l)),i}}function pt(t){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yt(t,e){return!e||"object"!==pt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dt(t){var e="function"==typeof Map?new Map:void 0;return(dt=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return mt(t,arguments,bt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),gt(r,t)})(t)}function mt(t,e,n){return(mt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&gt(o,n.prototype),o}).apply(null,arguments)}function gt(t,e){return(gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bt(t){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vt=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=yt(this,bt(e).call(this))).map=null,t.markers=[],t.bootstrapMap=!0,t.bootstrapBounds=!1;var n=document.createElement("style");return n.textContent="\n            :host {\n              position: relative;\n            }\n            .map {\n              position: relative;\n              width: 100%;\n              height: 100%;\n            }\n            .gm-bundled-control {\n                bottom: 69px!important;\n                right: 28px!important;\n\n            }\n            .gm-bundled-control > div > div {\n                width: 28px!important;\n                height: 55px!important;\n            }\n            .gm-bundled-control > div > div > div {\n                width: 24px!important;\n                margin: 0 3px!important;\n            }\n            .gm-bundled-control button {\n                width: 28px!important;\n                height: 27px!important;\n            }\n            .gm-bundled-control button img {\n                height: 12px!important;\n                width: 11px!important;\n                margin: 8px!important;\n            }\n        ",t.appendChild(n),t.mapElement=document.createElement("div"),t.mapElement.className="map",t.appendChild(t.mapElement),t}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gt(t,e)}(e,dt(HTMLElement)),n=e,(r=[{key:"connectedCallback",value:function(){window.initGoogleMap=this.init.bind(this);var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCRTnC96aFUTP62mNuxDBUoHcLvR35MLOI&callback=initGoogleMap",this.appendChild(t)}},{key:"bindEvents",value:function(){this.map.addListener("bounds_changed",this.dispatchUpdatedCoords.bind(this))}},{key:"unbindEvents",value:function(){google.maps.event.clearListeners(this.map,"bounds_changed")}},{key:"init",value:function(){var t=this;this.map=new google.maps.Map(this.mapElement,{center:{lat:48.074766,lng:7.574985},fullscreenControl:!1,mapTypeControl:!1,streetViewControl:!1,styles:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],zoom:4,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL}}),k(["stores"],ft(function(e){t.stores=e.stores,t.resetMarkers(),t.setMarkers()},100)),k("userLocation",function(e){e.geolocation&&(t.map.setCenter(e.geolocation),t.dispatchUpdatedCoords())}),k("mapInitialCoords",function(e){if(e.mapInitialCoords){var n=new google.maps.LatLng({lat:e.mapInitialCoords.ne.lat,lng:e.mapInitialCoords.ne.lng}),r=new google.maps.LatLng({lat:e.mapInitialCoords.sw.lat,lng:e.mapInitialCoords.sw.lng}),o=new google.maps.LatLngBounds;o.extend(n),o.extend(r),t.bootstrapBounds=!0,t.map.fitBounds(o,0)}}),this.bindEvents()}},{key:"setMarkers",value:function(){var t=this;this.map&&(this.markers=this.stores.filter(function(t){return t.visible}).map(function(e){return new google.maps.Marker({map:t.map,position:{lat:Number(e.lat),lng:Number(e.lng)},title:e.post_title})}),this.markerCluster=new lt(this.map,this.markers,{gridSize:40,styles:[{url:"https://media.yoox.biz/ytos/resources/BALMAIN/Images/icons/pinmap-cluster.svg",width:35,height:35}]}))}},{key:"resetMarkers",value:function(){this.markerCluster&&this.markerCluster.clearMarkers(),this.markers.map(function(t){t.setMap(null)}),this.markers=[]}},{key:"dispatchUpdatedCoords",value:function(){if(this.bootstrapMap)this.bootstrapMap=!1;else if(this.bootstrapBounds)this.bootstrapBounds=!1;else{var t={center:{lat:this.map.center.lat(),lng:this.map.center.lng()},ne:{lat:this.map.getBounds().getNorthEast().lat(),lng:this.map.getBounds().getNorthEast().lng()},sw:{lat:this.map.getBounds().getSouthWest().lat(),lng:this.map.getBounds().getSouthWest().lng()}};E(f(t))}}}])&&ht(n.prototype,r),o&&ht(n,o),e}();function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function St(t,e){return!e||"object"!==_t(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ot(t){var e="function"==typeof Map?new Map:void 0;return(Ot=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Tt(t,arguments,Et(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),kt(r,t)})(t)}function Tt(t,e,n){return(Tt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&kt(o,n.prototype),o}).apply(null,arguments)}function kt(t,e){return(kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Et(t){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}window.customElements.define("stores-map",vt);var xt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=St(this,Et(e).call(this))).template=document.querySelector("#filter-btn-template"),t}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kt(t,e)}(e,Ot(HTMLElement)),n=e,o=[{key:"observedAttributes",get:function(){return["applied","filter"]}}],(r=[{key:"connectedCallback",value:function(){var t=this;this.innerHTML=this.template.innerHTML,this.text=this.querySelector(".text"),this.icon=this.querySelector(".icon"),this.finalClassName="icon",this.addEventListener("click",this.handleFilterClick.bind(this)),this.icon.addEventListener("transitionend",function(){t.icon.className=t.finalClassName})}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"filter":this.setFilter(n);break;case"applied":this.setApplied(n)}this.update(t,n)}},{key:"setFilter",value:function(t){this.filger=t,this.handleFilter(t)}},{key:"setApplied",value:function(t){this.applied=t,this.handleApplied(t)}},{key:"handleFilter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"",id:""};this.text.innerText=t.name,this.filterId=t.id}},{key:"handleApplied",value:function(t){var e=t?"icon fade-in":"icon fade-out";this.finalClassName=t?"icon visible":"icon invisible",this.icon&&(this.icon.className=e)}},{key:"handleFilterClick",value:function(t){E({type:"TOGGLE_STORE_TYPE",storeTypeId:this.filterId})}}])&&wt(n.prototype,r),o&&wt(n,o),e}();function Ct(t){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lt(t,e){return!e||"object"!==Ct(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pt(t){var e="function"==typeof Map?new Map:void 0;return(Pt=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return jt(t,arguments,Rt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),It(r,t)})(t)}function jt(t,e,n){return(jt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&It(o,n.prototype),o}).apply(null,arguments)}function It(t,e){return(It=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}window.customElements.define("filter-btn",xt);var At=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Lt(this,Rt(e).call(this))).toggleBtn=t.querySelector(".filter-panel_toggleBtn"),t.resetBtn=t.querySelector(".filter-panel_resetBtn"),t.panel=t.querySelector("collapsable-tab"),t.list=t.querySelector("ul"),t}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&It(t,e)}(e,Pt(HTMLElement)),n=e,o=[{key:"observedAttributes",get:function(){return["filters","open","filters-applied"]}}],(r=[{key:"connectedCallback",value:function(){this.toggleBtn.addEventListener("click",this.handleToggleBtn.bind(this)),this.resetBtn.addEventListener("click",this.handleReset.bind(this))}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"filters":this.setFilters(JSON.parse(n));break;case"open":this.setOpen("true"===n);break;case"filters-applied":this.setFiltersApplied(JSON.parse(n))}}},{key:"setFilters",value:function(t){this.filters=t,this.handleFilters(t)}},{key:"setOpen",value:function(t){this.open=t,this.handleOpen(t)}},{key:"setFiltersApplied",value:function(t){this.filtersApplied=t,this.handleFiltersApplied(t)}},{key:"handleOpen",value:function(t){this.panel&&this.panel.setAttribute("open",t)}},{key:"handleToggleBtn",value:function(){E({type:"TOGGLE_FILTER_PANEL"})}},{key:"handleReset",value:function(){E(a({type:"RESET_FILTERS"}))}},{key:"handleFilters",value:function(t){var e=this;this.filterBtns=t.map(function(t){var n=document.createElement("filter-btn");return e.list.appendChild(n),n.setFilter(t),n.setApplied(!1),n})}},{key:"handleFiltersApplied",value:function(t){this.filterBtns.forEach(function(e){var n=t.includes(e.filterId);e.setApplied(n)})}}])&&Mt(n.prototype,r),o&&Mt(n,o),e}();function Nt(t){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zt(t,e){return!e||"object"!==Nt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bt(t){var e="function"==typeof Map?new Map:void 0;return(Bt=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Ft(t,arguments,qt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Ht(r,t)})(t)}function Ft(t,e,n){return(Ft=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&Ht(o,n.prototype),o}).apply(null,arguments)}function Ht(t,e){return(Ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qt(t){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}window.customElements.define("filter-panel",At);var Zt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=zt(this,qt(e).call(this))).name=t.querySelector(".store_name"),t.phone=t.querySelector(".store_phone .text"),t.mail=t.querySelector(".store_mail .text a"),t.categories=t.querySelector(".store_categories"),t}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ht(t,e)}(e,Bt(HTMLElement)),n=e,o=[{key:"observedAttributes",get:function(){return["store"]}}],(r=[{key:"connectedCallback",value:function(){this.querySelector(".backButton").addEventListener("click",this.closePanel.bind(this))}},{key:"attributeChangedCallback",value:function(t,e,n){this.setStore(JSON.parse(n))}},{key:"setStore",value:function(t){this.store=t,this.update(t)}},{key:"update",value:function(t){var e=this;this.classList.toggle("slide-in-left",t),this.classList.toggle("slide-out-right",!t),t&&(this.name.innerText=t.name,this.phone.innerText=t.phone,this.mail.innerText=t.mail,this.mail.href="mailto:"+t.mail,this.querySelectorAll("[data-service]").forEach(function(e){return e.hidden=!t[e.dataset.service]}),this.categories.innerHTML="",t.productCategory.forEach(function(t){var n=document.createElement("li");n.innerText=t.name,e.categories.appendChild(n)}))}},{key:"closePanel",value:function(){E(c(null))}}])&&Dt(n.prototype,r),o&&Dt(n,o),e}();function Gt(t){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vt(t,e){return!e||"object"!==Gt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wt(t){var e="function"==typeof Map?new Map:void 0;return(Wt=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Yt(t,arguments,Xt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Kt(r,t)})(t)}function Yt(t,e,n){return(Yt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&Kt(o,n.prototype),o}).apply(null,arguments)}function Kt(t,e){return(Kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xt(t){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}window.customElements.define("store-details",Zt);var Jt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Vt(this,Xt(e).call(this))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kt(t,e)}(e,Wt(HTMLElement)),n=e,o=[{key:"observedAttributes",get:function(){return["open"]}}],(r=[{key:"connectedCallback",value:function(){var t=this;this.addEventListener("touchstart",function(e){t.touchStart=e.touches[0].clientX},{passive:!0}),this.addEventListener("touchend",function(e){t.touchStart-e.changedTouches[0].clientX>100&&E({type:"TOGGLE_SEARCH_LAYER"})},{passive:!0})}},{key:"attributeChangedCallback",value:function(t,e,n){this.setOpen("true"===n)}},{key:"setOpen",value:function(t){this.open=t,this.update(t)}},{key:"update",value:function(t){this.className=t?"slide-in-left":"slide-out-right"}}])&&Ut(n.prototype,r),o&&Ut(n,o),e}();window.customElements.define("left-panel",Jt),fetch("data/stores.json").then(function(t){return t.json()}).then(function(t){var e=t.map(function(t){return{id:String(t.ID)||"",name:t.post_title||"",address:t["wpcf-store-address"]||"",geolocationAddress:t["wpcf-store-geolocation-address"]||"",lat:t["_store-lat"]||"",lng:t["_store-lng"]||"",phone:t["wpcf-store-phone"]||"",mail:t["wpcf-store-email-storelocator"]||"",mails:t["wpcf-store-email"]||"",brand:t["wpcf-store-main-store-brand"]||"",classification:t["wpcf-store-type-classification"]||"",isFlagship:x(t["wpcf-store-is-flagship"]),gifCardAccepted:x(t["wpcf-store-gift-card-accepted"]),hasWiFi:x(t["wpcf-store-has-wifi"]),hasMadeToMeasure:x(t["wpcf-store-has-made-to-measure"]),hasTailoring:x(t["wpcf-store-has-tailoring"]),bookable:x(t["wpcf-store-bookable"]),checkAvailability:x(t["wpcf-store-attr-check-availabilty"]),reserveInStore:x(t["wpcf-store-attr-reserve-in-store"]),pickUpInStore:x(t["wpcf-store-attr-pick-up-in-store"]),returnInStore:x(t["wpcf-store-attr-return-in-store"]),clickFromStore:x(t["wpcf-store-attr-click-from-store"]),gender:t.gender?t.gender.map(function(t){return{id:t.term_id,name:t.name}}):[],storeTypes:t["store-type"]?t["store-type"].map(function(t){return{id:String(t.term_id),name:t.name}}):[],productCategory:t["product-category"]?t["product-category"].map(function(t){return{id:t.id,name:t.name}}):[],location:t.location?Object.keys(t.location).map(function(e){return t.location[e].name}):[],visible:!0}});E(function(t){return{type:"LOAD_STORES",stores:t}}(e))}),fetch("data/store-types.json").then(function(t){return t.json()}).then(function(t){var e=t.terms.map(function(t){return{id:String(t.term_id)||"",name:t.name||""}});E(function(t){return{type:"LOAD_STORE_TYPES",storeTypes:t}}(e))}),fetch("data/locations.json").then(function(t){return t.json()}).then(function(t){var e=t.terms.map(function(t){return{id:String(t.term_id)||"",name:t.name||""}});E(function(t){return{type:"LOAD_LOCATIONS",locations:t}}(e))}),g(),window.onpopstate=g,document.body.addEventListener("keydown",function(t){9===t.keyCode&&document.body.classList.add("keyboardNavigation")}),document.body.addEventListener("click",function(t){document.body.classList.remove("keyboardNavigation")}),setTimeout(function(){var t=document.querySelector("search-box");k("searchTerm",function(e){t.setSearchTerm(e.searchTerm)});var e=document.querySelector("results-number");k("stores",function(t){var n=t.stores.filter(function(t){return t.visible}).length;e.setStoresNumber(n)});var n=document.querySelector("stores-list");k("stores",ft(function(t){n.setStores(t.stores)},900));var r=document.querySelector("store-details");k("openedStore",function(t){r.setStore(t.openedStore)});var o=document.querySelector("filter-panel");k(["storeTypes"],function(t){o.setFilters(t.storeTypes)}),k(["filters.storeTypes"],function(t){o.setFiltersApplied(t.filters.storeTypes)}),k(["ui.filterPanelOpen"],function(t){o.setOpen(t.ui.filterPanelOpen?"true":"false")});var i=document.querySelector("left-panel");k(["ui.searchLayerOpen"],function(t){i.setOpen(t.ui.searchLayerOpen)})},0)}]);
//# sourceMappingURL=bundle.js.map